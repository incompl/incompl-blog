<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Checking JavaScript Function Argument Types</title>
    <link rel="icon" type="image/png" href="http://incompl.com/images/favicon.png"/>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/code.css">
  </head>

  <body>
    <div id="wrapper">
      <span class="author">
        September 19, 2010
      </span>
      <h1><a href="/">incompl</a></h1>
      <h2>Checking JavaScript Function Argument Types</h2>
      <div class="post">
        <div class="entrybody">
          The <em><a href="https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special_Operators/typeof_Operator">typeof</a></em> operator in JavaScript can be a little misleading. Here is an example of using it to check the type of a function argument.
<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">str</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;foo &quot;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="s2">&quot;Can only foo a string&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">foo</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;foo dog&quot;</span><span class="p">;</span> <span class="c1">// true</span>
</code></pre>
</div>

So far so good. However, in JavaScript a "String" can be either a value <em>or</em> a String object. What happens if we pass in a String object?
<div class="highlight"><pre><code class="javascript"><span class="nx">foo</span><span class="p">(</span><span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;foo dog&quot;</span><span class="p">;</span> <span class="c1">// exception thrown!</span>
</code></pre>
</div>

Woops! That is definitely not what we want.

Sadly, there is nothing built into JavaScript that is perfect for this situation. But consider the following alternative. This version was borrowed from  <a href="http://dmitry.baranovskiy.com/post/typeof-and-friends">Dmitry Baranovskiy</a> but there are a few similar functions around the net.
<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">is</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">type</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;null&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">o</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span>
           <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">o</span><span class="p">)</span> <span class="o">||</span>
           <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">o</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">o</span><span class="p">))</span> <span class="o">||</span>
           <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;array&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">&amp;&amp;</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">o</span><span class="p">))</span> <span class="o">||</span>
           <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">o</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span>
           <span class="o">==</span> <span class="nx">type</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

Let's rewrite our <em>foo</em> function using this new <em>is </em>function.
<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">is</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;foo &quot;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="s2">&quot;Can only foo a string&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">foo</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;foo dog&quot;</span><span class="p">;</span> <span class="c1">// true</span>
<span class="nx">foo</span><span class="p">(</span><span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;foo dog&quot;</span><span class="p">;</span> <span class="c1">// true</span>
</code></pre>
</div>

Now we're getting what we want! As with <a href="http://javascript.crockford.com/prototypal.html">object instantiation</a>, this is a case where what's built into the language just doesn't cut it, but if you understand what you'd prefer and why, you can definitely get what you need.

        </div>
      </div>
    </div>
  </body>
</html>